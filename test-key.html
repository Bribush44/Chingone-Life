<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  body { font-family: sans-serif; padding: 20px; background: #111; color: #eee; }
  button { background: #4ade80; color: #000; border: none; padding: 16px 24px; font-size: 16px; font-weight: bold; border-radius: 10px; width: 100%; margin-top: 16px; }
  pre { background: #222; padding: 14px; border-radius: 8px; font-size: 12px; white-space: pre-wrap; word-break: break-all; margin-top: 16px; }
  .ok { color: #4ade80; }
  .err { color: #f87171; }
</style>
</head>
<body>
<h2>üîë API Key Tester</h2>
<p style="font-size:13px;color:#aaa;">Tap the button to test if your OpenAI key works from this browser.</p>
<button onclick="testKey()">‚ñ∂ Test API Key Now</button>
<div id="out"></div>
<script>
const KEY = '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';

async function testKey() {
  const out = document.getElementById('out');
  out.innerHTML = '<pre>Testing...</pre>';
  try {
    const res = await fetch('https://api.openai.com/v1/chat/completions', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + KEY },
      body: JSON.stringify({ model: 'gpt-4o-mini', max_tokens: 20, messages: [{ role: 'user', content: 'Say: KEY WORKS' }] })
    });
    const text = await res.text();
    let data;
    try { data = JSON.parse(text); } catch(e) { data = text; }
    
    if (res.ok) {
      const reply = data?.choices?.[0]?.message?.content || JSON.stringify(data);
      out.innerHTML = '<pre class="ok">‚úÖ SUCCESS! HTTP ' + res.status + '\n\nResponse: ' + reply + '</pre>';
    } else {
      out.innerHTML = '<pre class="err">‚ùå FAILED ‚Äî HTTP ' + res.status + '\n\n' + (data?.error?.message || JSON.stringify(data)) + '</pre>';
    }
  } catch(e) {
    out.innerHTML = '<pre class="err">‚ùå NETWORK ERROR\n\n' + e.message + '\n\nThis means the browser itself is blocking the request.\nTry on a different browser or network.</pre>';
  }
}
</script>
</body>
</html>
